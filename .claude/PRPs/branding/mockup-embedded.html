<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KILD — Daemon Multiplexer Vision</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Base surfaces */
            --void: #08090A;
            --obsidian: #0E1012;
            --surface: #151719;
            --elevated: #1C1F22;

            /* Borders */
            --border-subtle: #1F2328;
            --border: #2D3139;
            --border-strong: #3D434D;

            /* Text */
            --text-muted: #5C6370;
            --text-subtle: #848D9C;
            --text: #B8C0CC;
            --text-bright: #E8ECF0;
            --text-white: #F8FAFC;

            /* Accents — muted, embedded in the void */
            --ice: #7CB4C8;
            --ice-dim: #5E9AB2;
            --ice-bright: #98CCE0;
            --ice-glow: rgba(124, 180, 200, 0.12);

            --blade: #64748B;

            --aurora: #6B8F5E;
            --aurora-dim: #556F4A;
            --aurora-glow: rgba(107, 143, 94, 0.10);

            --copper: #C49A5C;
            --copper-glow: rgba(196, 154, 92, 0.10);

            --ember: #B87060;
            --ember-glow: rgba(184, 112, 96, 0.10);

            --kiri: #A088B0;
            --kiri-glow: rgba(160, 136, 176, 0.10);

            /* Terminal colors (One Dark) */
            --term-bg: #1A1D21;
            --term-red: #e06c75;
            --term-green: #98c379;
            --term-yellow: #e5c07b;
            --term-blue: #61afef;
            --term-magenta: #c678dd;
            --term-cyan: #56b6c2;
            --term-white: #abb2bf;
            --term-bright-black: #5c6370;

            /* Typography */
            --font-ui: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-mono: 'JetBrains Mono', 'SF Mono', monospace;

            --text-xs: 11px;
            --text-sm: 12px;
            --text-base: 13px;
            --text-md: 14px;

            /* Spacing */
            --space-1: 4px;
            --space-2: 8px;
            --space-3: 12px;
            --space-4: 16px;
            --space-5: 20px;
            --space-6: 24px;

            /* Radii */
            --radius-sm: 4px;
            --radius-md: 6px;
            --radius-lg: 8px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: var(--font-ui);
            font-size: var(--text-base);
            background: var(--void);
            color: var(--text);
            height: 100vh;
            overflow: hidden;
        }

        /* ============================================
           LAYOUT: Rail | Sidebar | Main
           ============================================ */

        .app {
            display: grid;
            grid-template-columns: 48px 220px 1fr;
            grid-template-rows: 1fr auto;
            height: calc(100vh - 28px);
            margin-top: 28px;
        }

        /* ============================================
           PROJECT RAIL (far left, 48px)
           ============================================ */

        .rail {
            grid-row: 1 / -1;
            background: var(--obsidian);
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: var(--space-3) 0;
            gap: var(--space-2);
        }

        .rail-top {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-2);
            flex: 1;
        }

        /* macOS traffic lights placeholder */
        .rail-traffic {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            margin-bottom: var(--space-3);
            padding-bottom: var(--space-3);
            border-bottom: 1px solid var(--border-subtle);
            width: 100%;
        }

        .traffic-lights {
            display: flex;
            gap: 6px;
        }

        .traffic-light {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .traffic-light.close { background: #ff5f56; }
        .traffic-light.minimize { background: #ffbd2e; }
        .traffic-light.maximize { background: #27c93f; }

        /* Project icon */
        .project-icon {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-sm);
            font-weight: 600;
            cursor: pointer;
            transition: all 100ms;
            position: relative;
            color: var(--text-subtle);
            background: var(--surface);
            border: 1px solid transparent;
        }

        .project-icon:hover {
            background: var(--elevated);
            color: var(--text);
        }

        .project-icon.selected {
            background: var(--surface);
            color: var(--text-bright);
            border-color: var(--border);
        }

        /* Selected indicator — left pill */
        .project-icon.selected::before {
            content: '';
            position: absolute;
            left: -10px;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 20px;
            background: var(--ice);
            border-radius: 0 2px 2px 0;
        }

        /* Active count badge */
        .project-badge {
            position: absolute;
            top: -3px;
            right: -3px;
            min-width: 14px;
            height: 14px;
            border-radius: 7px;
            background: var(--aurora);
            color: var(--void);
            font-size: 9px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 3px;
        }

        .project-add {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-md);
            color: var(--text-muted);
            cursor: pointer;
            transition: all 100ms;
            border: 1px dashed var(--border);
        }

        .project-add:hover {
            color: var(--text-subtle);
            border-color: var(--border-strong);
            background: var(--surface);
        }

        /* Settings at bottom of rail */
        .rail-bottom {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-2);
            padding-top: var(--space-3);
            border-top: 1px solid var(--border-subtle);
            width: 100%;
        }

        .rail-settings {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-md);
            color: var(--text-muted);
            cursor: pointer;
            transition: all 100ms;
        }

        .rail-settings:hover {
            color: var(--text-subtle);
            background: var(--surface);
        }

        /* ============================================
           KILD LIST SIDEBAR (220px)
           ============================================ */

        .sidebar {
            grid-row: 1 / 2;
            background: var(--obsidian);
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .sidebar-project-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-2) var(--space-3);
            border-bottom: 1px solid var(--border-subtle);
            -webkit-app-region: drag;
        }

        .sidebar-project-name {
            font-size: var(--text-sm);
            font-weight: 600;
            color: var(--text-bright);
            letter-spacing: -0.01em;
        }

        .sidebar-project-stats {
            display: flex;
            gap: var(--space-2);
            font-size: var(--text-xs);
            color: var(--text-muted);
            -webkit-app-region: no-drag;
        }

        .sidebar-new-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-1);
            padding: var(--space-1) var(--space-2);
            font-family: var(--font-ui);
            font-size: var(--text-xs);
            font-weight: 500;
            border-radius: var(--radius-sm);
            border: 1px solid rgba(124, 180, 200, 0.20);
            background: rgba(124, 180, 200, 0.06);
            color: var(--ice);
            cursor: pointer;
            transition: all 100ms;
            -webkit-app-region: no-drag;
        }

        .sidebar-new-btn:hover {
            background: rgba(124, 180, 200, 0.12);
            border-color: rgba(124, 180, 200, 0.35);
        }

        .sidebar-content {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-2) 0;
        }

        .sidebar-section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-1) var(--space-3);
            font-size: 10px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.06em;
        }

        .sidebar-section-count {
            font-family: var(--font-mono);
            font-size: 10px;
        }

        /* Kild list item */
        .kild-item {
            display: flex;
            align-items: flex-start;
            gap: var(--space-2);
            padding: var(--space-2) var(--space-3);
            cursor: pointer;
            transition: background 80ms;
            border-left: 2px solid transparent;
            position: relative;
        }

        .kild-item:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        .kild-item.selected {
            background: rgba(255, 255, 255, 0.03);
            border-left-color: var(--ice);
        }

        .kild-dot {
            width: 7px;
            height: 7px;
            border-radius: 50%;
            flex-shrink: 0;
            margin-top: 4px;
        }

        .kild-dot.active { background: var(--aurora); }
        .kild-dot.stopped { background: var(--copper); opacity: 0.6; }
        .kild-dot.crashed { background: var(--ember); }
        .kild-dot.waiting { background: var(--kiri); }

        .kild-info { flex: 1; min-width: 0; }

        .kild-name {
            font-size: var(--text-sm);
            font-weight: 500;
            color: var(--text);
            line-height: 1.3;
        }

        .kild-item.selected .kild-name { color: var(--text-bright); }

        .kild-meta {
            font-size: 10px;
            color: var(--text-muted);
            margin-top: 1px;
        }

        /* Agent tree within kild item */
        .kild-agents {
            margin-top: 3px;
            padding-left: 2px;
        }

        .kild-agent-row {
            display: flex;
            align-items: center;
            gap: var(--space-1);
            font-size: 10px;
            font-family: var(--font-mono);
            color: var(--text-muted);
            line-height: 1.6;
        }

        .kild-agent-row .tree-char {
            color: var(--border);
            width: 12px;
            text-align: center;
        }

        .agent-dot {
            width: 5px;
            height: 5px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .agent-dot.working { background: var(--aurora); }
        .agent-dot.thinking { background: var(--kiri); }
        .agent-dot.idle { background: var(--text-muted); }
        .agent-dot.waiting { background: var(--copper); }

        .kild-agent-badge {
            font-size: 10px;
            font-family: var(--font-mono);
            color: var(--kiri);
            opacity: 0.8;
        }

        /* Chevron hint on selected kild — "click again to inspect" */
        .kild-item.selected::after {
            content: '›';
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            font-size: var(--text-md);
            color: var(--text-muted);
            opacity: 0.5;
            transition: opacity 80ms;
        }

        .kild-item.selected:hover::after {
            opacity: 1;
            color: var(--ice);
        }

        /* ============================================
           KILD DETAIL VIEW (sidebar alternate state)
           ============================================ */

        .sidebar-detail {
            display: none;
            flex-direction: column;
            height: 100%;
        }

        .sidebar.detail-mode .sidebar-content { display: none; }
        .sidebar.detail-mode .sidebar-project-header { display: none; }
        .sidebar.detail-mode .sidebar-detail { display: flex; }

        .detail-back {
            display: flex;
            align-items: center;
            gap: var(--space-1);
            padding: var(--space-2) var(--space-3);
            font-size: var(--text-xs);
            color: var(--text-muted);
            cursor: pointer;
            border: none;
            background: transparent;
            font-family: var(--font-ui);
            transition: color 80ms;
            border-bottom: 1px solid var(--border-subtle);
        }

        .detail-back:hover { color: var(--text-subtle); }

        .detail-header {
            padding: var(--space-3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .detail-name {
            font-size: var(--text-sm);
            font-weight: 600;
            color: var(--text-bright);
            margin-bottom: 3px;
        }

        .detail-status-row {
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .detail-status-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-1);
            font-size: 10px;
            font-weight: 500;
            padding: 1px 6px;
            border-radius: 3px;
        }

        .detail-status-badge.active {
            background: var(--aurora-glow);
            color: var(--aurora);
        }

        .detail-status-badge.stopped {
            background: var(--copper-glow);
            color: var(--copper);
        }

        .detail-duration {
            font-size: 10px;
            color: var(--text-muted);
            font-family: var(--font-mono);
        }

        .detail-body {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-3);
        }

        .detail-section {
            margin-bottom: var(--space-4);
        }

        .detail-section-label {
            font-size: 9px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.06em;
            margin-bottom: var(--space-1);
        }

        .detail-note {
            font-size: var(--text-xs);
            color: var(--text);
            line-height: 1.5;
            padding: var(--space-2);
            background: var(--surface);
            border-radius: var(--radius-sm);
        }

        .detail-kv {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            padding: 3px 0;
        }

        .detail-kv-label {
            font-size: var(--text-xs);
            color: var(--text-muted);
        }

        .detail-kv-value {
            font-size: var(--text-xs);
            font-family: var(--font-mono);
            color: var(--text);
        }

        .detail-path-wrap {
            position: relative;
        }

        .detail-path {
            font-size: 10px;
            font-family: var(--font-mono);
            color: var(--text-muted);
            padding: var(--space-2);
            padding-right: 36px;
            background: var(--surface);
            border-radius: var(--radius-sm);
            word-break: break-all;
            line-height: 1.4;
        }

        .detail-inline-btn {
            position: absolute;
            right: 4px;
            top: 4px;
            padding: 2px 5px;
            font-size: 9px;
            font-family: var(--font-ui);
            color: var(--text-muted);
            background: var(--obsidian);
            border: 1px solid var(--border);
            border-radius: 3px;
            cursor: pointer;
            opacity: 0;
            transition: all 80ms;
        }

        .detail-path-wrap:hover .detail-inline-btn,
        .detail-pr-row:hover .detail-inline-btn {
            opacity: 1;
        }

        .detail-inline-btn:hover {
            color: var(--text-subtle);
            border-color: var(--border-strong);
        }

        .detail-git-summary {
            display: flex;
            gap: var(--space-3);
            font-size: var(--text-xs);
            font-family: var(--font-mono);
        }

        .detail-git-add { color: var(--aurora); }
        .detail-git-del { color: var(--ember); }
        .detail-git-files { color: var(--text-muted); }

        .detail-pr-row {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-2);
            padding-right: 36px;
            background: var(--surface);
            border-radius: var(--radius-sm);
            font-size: var(--text-xs);
            position: relative;
        }

        .detail-pr-number {
            color: var(--ice);
            font-family: var(--font-mono);
            font-weight: 500;
        }

        .detail-pr-status {
            color: var(--text-muted);
        }

        .detail-pr-checks {
            margin-left: auto;
            color: var(--aurora);
            font-family: var(--font-mono);
        }

        /* Shortcut hints at bottom of detail view */
        .detail-shortcuts {
            padding: var(--space-2) var(--space-3);
            border-top: 1px solid var(--border-subtle);
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-1) var(--space-3);
            font-size: 10px;
            color: var(--text-muted);
        }

        .detail-shortcut {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        /* ============================================
           MAIN TERMINAL AREA
           ============================================ */

        .main {
            grid-row: 1 / 2;
            display: flex;
            flex-direction: column;
            background: var(--void);
            overflow: hidden;
        }

        /* Teammate tab bar (within a kild) */
        .teammate-tabs {
            display: flex;
            align-items: center;
            background: var(--obsidian);
            border-bottom: 1px solid var(--border-subtle);
            padding: 0 var(--space-2);
            gap: 1px;
            flex-shrink: 0;
        }

        .teammate-tab {
            display: flex;
            align-items: center;
            gap: var(--space-1);
            padding: var(--space-2) var(--space-3);
            font-size: var(--text-xs);
            font-weight: 500;
            color: var(--text-muted);
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            transition: all 80ms;
            font-family: var(--font-ui);
        }

        .teammate-tab:hover {
            color: var(--text-subtle);
            background: rgba(255, 255, 255, 0.02);
        }

        .teammate-tab.active {
            color: var(--text);
            border-bottom-color: var(--ice);
        }

        .teammate-tab .tab-dot {
            width: 5px;
            height: 5px;
            border-radius: 50%;
        }

        .teammate-tab .tab-dot.working { background: var(--aurora); }
        .teammate-tab .tab-dot.thinking { background: var(--kiri); }
        .teammate-tab .tab-dot.idle { background: var(--text-muted); }
        .teammate-tab .tab-dot.waiting { background: var(--copper); }

        .teammate-tabs-right {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: var(--space-1);
        }

        .tab-action {
            padding: var(--space-1);
            color: var(--text-muted);
            background: transparent;
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: var(--text-xs);
            font-family: var(--font-ui);
        }

        .tab-action:hover {
            color: var(--text-subtle);
            background: var(--surface);
        }

        /* Terminal split container */
        .terminal-split {
            flex: 1;
            display: flex;
            gap: 1px;
            background: var(--border-subtle);
            overflow: hidden;
        }

        .terminal-pane {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Pane header (thin, minimal) */
        .pane-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 3px var(--space-3);
            background: var(--surface);
            border-bottom: 1px solid var(--border-subtle);
            flex-shrink: 0;
        }

        .pane-label {
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .pane-name {
            font-size: var(--text-xs);
            font-weight: 500;
            color: var(--text-subtle);
        }

        .pane-path {
            font-size: 10px;
            font-family: var(--font-mono);
            color: var(--text-muted);
        }

        .pane-actions {
            display: flex;
            gap: 2px;
            opacity: 0;
            transition: opacity 100ms;
        }

        .terminal-pane:hover .pane-actions { opacity: 1; }

        .pane-btn {
            padding: 2px 4px;
            color: var(--text-muted);
            background: transparent;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 10px;
            font-family: var(--font-ui);
        }

        .pane-btn:hover {
            color: var(--text-subtle);
            background: var(--elevated);
        }

        /* Terminal content */
        .terminal {
            flex: 1;
            background: var(--term-bg);
            font-family: var(--font-mono);
            font-size: 12px;
            line-height: 1.55;
            padding: var(--space-2) var(--space-3);
            overflow-y: auto;
            color: var(--term-white);
        }

        .term-line { white-space: pre-wrap; word-break: break-all; }
        .term-prompt { color: var(--term-green); }
        .term-dim { color: var(--term-bright-black); }
        .term-info { color: var(--term-blue); }
        .term-highlight { color: var(--term-yellow); }
        .term-output { color: var(--term-white); opacity: 0.85; }
        .term-error { color: var(--term-red); }
        .term-green { color: var(--term-green); }
        .term-cursor {
            display: inline-block;
            width: 7px;
            height: 14px;
            background: var(--term-white);
            animation: blink 1s step-end infinite;
            vertical-align: text-bottom;
        }

        @keyframes blink { 50% { opacity: 0; } }

        /* ============================================
           MINIMIZED KILD BARS (bottom of main area)
           ============================================ */

        .minimized-area {
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            gap: 1px;
            background: var(--border-subtle);
            border-top: 1px solid var(--border-subtle);
        }

        .minimized-bar {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-1) var(--space-3);
            background: var(--obsidian);
            cursor: pointer;
            transition: background 80ms;
        }

        .minimized-bar:hover {
            background: var(--surface);
        }

        .minimized-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .minimized-dot.active { background: var(--aurora); }
        .minimized-dot.waiting { background: var(--copper); }

        .minimized-name {
            font-size: var(--text-xs);
            font-weight: 500;
            color: var(--text-subtle);
        }

        .minimized-status {
            font-size: 10px;
            color: var(--text-muted);
            font-family: var(--font-mono);
        }

        .minimized-time {
            margin-left: auto;
            font-size: 10px;
            color: var(--text-muted);
        }

        .minimized-expand {
            font-size: 10px;
            color: var(--text-muted);
            opacity: 0;
            transition: opacity 80ms;
        }

        .minimized-bar:hover .minimized-expand { opacity: 1; }

        /* ============================================
           STATUS BAR (bottom)
           ============================================ */

        .status-bar {
            grid-column: 2 / -1;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 3px var(--space-3);
            background: var(--obsidian);
            border-top: 1px solid var(--border-subtle);
            font-size: 10px;
            color: var(--text-muted);
        }

        .status-left {
            display: flex;
            align-items: center;
            gap: var(--space-4);
        }

        .status-alert {
            display: flex;
            align-items: center;
            gap: var(--space-1);
        }

        .status-alert-dot {
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background: var(--copper);
        }

        .status-right {
            display: flex;
            gap: var(--space-3);
        }

        .shortcut {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .kbd {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 14px;
            padding: 0px 3px;
            font-family: var(--font-mono);
            font-size: 9px;
            font-weight: 500;
            color: var(--text-muted);
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 2px;
        }

        /* ============================================
           SCROLLBAR
           ============================================ */

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--border-strong); }

        /* ============================================
           VISION BANNER
           ============================================ */

        .vision-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--surface);
            padding: var(--space-1) var(--space-4);
            text-align: center;
            font-size: var(--text-xs);
            color: var(--text-muted);
            border-bottom: 1px solid var(--border-subtle);
            z-index: 1000;
        }

        .vision-banner strong {
            color: var(--text-subtle);
            font-weight: 600;
        }

        /* ============================================
           SPLIT RESIZE HANDLE (visual only)
           ============================================ */

        .split-handle {
            width: 1px;
            background: var(--border-subtle);
            cursor: col-resize;
            flex-shrink: 0;
            transition: background 100ms;
        }

        .split-handle:hover {
            background: var(--ice);
            width: 2px;
        }
    </style>
</head>
<body>
    <div class="vision-banner">
        <strong>VISION</strong> &mdash; KILD Daemon Multiplexer. Multi-project, embedded terminals, agent team support.
    </div>

    <div class="app">
        <!-- ================================
             PROJECT RAIL
             ================================ -->
        <nav class="rail">
            <div class="rail-top">
                <!-- Traffic lights -->
                <div class="rail-traffic">
                    <div class="traffic-lights">
                        <span class="traffic-light close"></span>
                        <span class="traffic-light minimize"></span>
                        <span class="traffic-light maximize"></span>
                    </div>
                </div>

                <!-- Projects -->
                <div class="project-icon selected" title="kild">
                    K
                    <span class="project-badge">3</span>
                </div>
                <div class="project-icon" title="shards-api">
                    S
                    <span class="project-badge">2</span>
                </div>
                <div class="project-icon" title="web-client">
                    W
                </div>
                <div class="project-add" title="Add project">+</div>
            </div>

            <div class="rail-bottom">
                <div class="rail-settings" title="Settings">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                    </svg>
                </div>
            </div>
        </nav>

        <!-- ================================
             KILD LIST SIDEBAR
             ================================ -->
        <aside class="sidebar">
            <div class="sidebar-project-header">
                <span class="sidebar-project-name">kild</span>
                <button class="sidebar-new-btn">+ New</button>
            </div>

            <div class="sidebar-content">
                <!-- Active section -->
                <div class="sidebar-section-header">
                    <span>Active</span>
                    <span class="sidebar-section-count" style="color: var(--aurora);">3</span>
                </div>

                <!-- feature-auth: agent team with 4 teammates (selected) -->
                <div class="kild-item selected">
                    <span class="kild-dot active"></span>
                    <div class="kild-info">
                        <div class="kild-name">feature-auth</div>
                        <div class="kild-meta">claude team &middot; 23m</div>
                        <div class="kild-agents">
                            <div class="kild-agent-row">
                                <span class="tree-char">&#9500;</span>
                                <span class="agent-dot working"></span>
                                <span>lead</span>
                            </div>
                            <div class="kild-agent-row">
                                <span class="tree-char">&#9500;</span>
                                <span class="agent-dot thinking"></span>
                                <span>architect</span>
                            </div>
                            <div class="kild-agent-row">
                                <span class="tree-char">&#9500;</span>
                                <span class="agent-dot working"></span>
                                <span>impl</span>
                            </div>
                            <div class="kild-agent-row">
                                <span class="tree-char">&#9492;</span>
                                <span class="agent-dot idle"></span>
                                <span>test</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- feature-api: single agent -->
                <div class="kild-item">
                    <span class="kild-dot active"></span>
                    <div class="kild-info">
                        <div class="kild-name">feature-api</div>
                        <div class="kild-meta">kiro &middot; 1h 12m</div>
                    </div>
                    <span class="kild-agent-badge">kiro</span>
                </div>

                <!-- perf-queries: single agent -->
                <div class="kild-item">
                    <span class="kild-dot active"></span>
                    <div class="kild-info">
                        <div class="kild-name">perf-queries</div>
                        <div class="kild-meta">claude &middot; 45m</div>
                    </div>
                    <span class="kild-agent-badge">claude</span>
                </div>

                <!-- Stopped section -->
                <div class="sidebar-section-header" style="margin-top: var(--space-3);">
                    <span>Stopped</span>
                    <span class="sidebar-section-count" style="color: var(--copper);">2</span>
                </div>

                <div class="kild-item">
                    <span class="kild-dot stopped"></span>
                    <div class="kild-info">
                        <div class="kild-name">fix-login-bug</div>
                        <div class="kild-meta">4h ago &middot; needs rebase</div>
                    </div>
                </div>

                <div class="kild-item">
                    <span class="kild-dot stopped"></span>
                    <div class="kild-info">
                        <div class="kild-name">dark-mode</div>
                        <div class="kild-meta">1d ago</div>
                    </div>
                </div>
            </div>

            <!-- Detail view (hidden by default, shown on Enter) -->
            <div class="sidebar-detail">
                <button class="detail-back" id="detailBack">&#8592; Kilds</button>

                <div class="detail-header">
                    <div class="detail-name">feature-auth</div>
                    <div class="detail-status-row">
                        <span class="detail-status-badge active">active</span>
                        <span class="detail-duration">23m 45s</span>
                    </div>
                </div>

                <div class="detail-body">
                    <div class="detail-section">
                        <div class="detail-section-label">Note</div>
                        <div class="detail-note">JWT authentication for API. Access tokens with 15-min expiry, refresh tokens with 7-day in Redis.</div>
                    </div>

                    <div class="detail-section">
                        <div class="detail-section-label">Session</div>
                        <div class="detail-kv">
                            <span class="detail-kv-label">Agent</span>
                            <span class="detail-kv-value">claude team</span>
                        </div>
                        <div class="detail-kv">
                            <span class="detail-kv-label">Members</span>
                            <span class="detail-kv-value">4 (lead, arch, impl, test)</span>
                        </div>
                        <div class="detail-kv">
                            <span class="detail-kv-label">Created</span>
                            <span class="detail-kv-value">today 14:32</span>
                        </div>
                        <div class="detail-kv">
                            <span class="detail-kv-label">Branch</span>
                            <span class="detail-kv-value">kild/feature-auth</span>
                        </div>
                    </div>

                    <div class="detail-section">
                        <div class="detail-section-label">Git</div>
                        <div class="detail-git-summary">
                            <span class="detail-git-add">+42</span>
                            <span class="detail-git-del">-12</span>
                            <span class="detail-git-files">5 files</span>
                        </div>
                        <div class="detail-kv" style="margin-top: 4px;">
                            <span class="detail-kv-label">Status</span>
                            <span class="detail-kv-value" style="color: var(--copper);">uncommitted</span>
                        </div>
                        <div class="detail-kv">
                            <span class="detail-kv-label">Commits</span>
                            <span class="detail-kv-value">3 ahead</span>
                        </div>
                    </div>

                    <div class="detail-section">
                        <div class="detail-section-label">PR</div>
                        <div class="detail-pr-row">
                            <span class="detail-pr-number">#234</span>
                            <span class="detail-pr-status">open &middot; 1 review</span>
                            <span class="detail-pr-checks">2/3</span>
                            <button class="detail-inline-btn">open</button>
                        </div>
                    </div>

                    <div class="detail-section">
                        <div class="detail-section-label">Path</div>
                        <div class="detail-path-wrap">
                            <div class="detail-path">~/.kild/worktrees/kild/feature-auth</div>
                            <button class="detail-inline-btn">copy</button>
                        </div>
                    </div>
                </div>

                <div class="detail-shortcuts">
                    <span class="detail-shortcut"><span class="kbd">e</span> editor</span>
                    <span class="detail-shortcut"><span class="kbd">y</span> copy path</span>
                    <span class="detail-shortcut"><span class="kbd">s</span> stop</span>
                    <span class="detail-shortcut"><span class="kbd">d</span> destroy</span>
                </div>
            </div>
        </aside>

        <!-- ================================
             MAIN: TERMINAL MULTIPLEXER
             ================================ -->
        <main class="main">
            <!-- Teammate tabs for feature-auth -->
            <div class="teammate-tabs">
                <button class="teammate-tab active">
                    <span class="tab-dot working"></span>
                    lead
                </button>
                <button class="teammate-tab">
                    <span class="tab-dot thinking"></span>
                    architect
                </button>
                <button class="teammate-tab">
                    <span class="tab-dot working"></span>
                    implementer
                </button>
                <button class="teammate-tab">
                    <span class="tab-dot idle"></span>
                    tester
                </button>

                <div class="teammate-tabs-right">
                    <button class="tab-action" title="Split view">split</button>
                    <button class="tab-action" title="Maximize">max</button>
                    <button class="tab-action" title="Stop kild">stop</button>
                </div>
            </div>

            <!-- Split terminal panes (lead + architect visible) -->
            <div class="terminal-split">
                <!-- Left pane: lead -->
                <div class="terminal-pane">
                    <div class="pane-header">
                        <div class="pane-label">
                            <span class="pane-name">lead</span>
                            <span class="pane-path">~/.kild/worktrees/kild/feature-auth</span>
                        </div>
                        <div class="pane-actions">
                            <button class="pane-btn">maximize</button>
                            <button class="pane-btn">minimize</button>
                        </div>
                    </div>
                    <div class="terminal">
                        <div class="term-line"><span class="term-dim">Working in:</span> <span class="term-output">~/.kild/worktrees/kild/feature-auth</span></div>
                        <div class="term-line"><span class="term-dim">Branch:</span> <span class="term-highlight">kild/feature-auth</span></div>
                        <div class="term-line"></div>
                        <div class="term-line"><span class="term-info">Claude:</span> I'll coordinate the JWT auth implementation. I've assigned tasks to the team:</div>
                        <div class="term-line"></div>
                        <div class="term-line"><span class="term-output">Architect: Design the auth middleware flow</span></div>
                        <div class="term-line"><span class="term-output">Implementer: Write JWT token generation</span></div>
                        <div class="term-line"><span class="term-output">Tester: Prepare test fixtures (waiting)</span></div>
                        <div class="term-line"></div>
                        <div class="term-line"><span class="term-dim">Delegated</span> <span class="term-green">3 tasks</span> <span class="term-dim">to teammates</span></div>
                        <div class="term-line"></div>
                        <div class="term-line"><span class="term-info">Claude:</span> Architect is designing the middleware chain. I'll review when ready.</div>
                        <div class="term-line"></div>
                        <div class="term-line"><span class="term-dim">Reading</span> src/auth/mod.rs</div>
                        <div class="term-line"><span class="term-dim">Reading</span> src/config/mod.rs</div>
                        <div class="term-line"></div>
                        <div class="term-line"><span class="term-info">Claude:</span> Current auth module uses basic token validation. The upgrade path is clear. Waiting on architect's middleware design before proceeding with integration.</div>
                        <div class="term-line"></div>
                        <div class="term-line"><span class="term-dim">Waiting for teammate messages...</span> <span class="term-cursor"></span></div>
                    </div>
                </div>

                <div class="split-handle"></div>

                <!-- Right pane: architect -->
                <div class="terminal-pane">
                    <div class="pane-header">
                        <div class="pane-label">
                            <span class="pane-name">architect</span>
                            <span class="pane-path">kild/feature-auth</span>
                        </div>
                        <div class="pane-actions">
                            <button class="pane-btn">maximize</button>
                            <button class="pane-btn">minimize</button>
                        </div>
                    </div>
                    <div class="terminal">
                        <div class="term-line"><span class="term-info">Claude:</span> Designing the auth middleware chain. Here's the flow:</div>
                        <div class="term-line"></div>
                        <div class="term-line"><span class="term-output">Request</span></div>
                        <div class="term-line"><span class="term-output">  &rarr; ExtractBearerToken</span></div>
                        <div class="term-line"><span class="term-output">  &rarr; ValidateJWT (check sig + expiry)</span></div>
                        <div class="term-line"><span class="term-output">  &rarr; LoadUserContext</span></div>
                        <div class="term-line"><span class="term-output">  &rarr; Handler</span></div>
                        <div class="term-line"></div>
                        <div class="term-line"><span class="term-dim">Creating</span> <span class="term-green">src/auth/middleware.rs</span></div>
                        <div class="term-line"></div>
                        <div class="term-line"><span class="term-info">Claude:</span> Writing the middleware with two paths:</div>
                        <div class="term-line"><span class="term-output">- Access token: validate inline (fast)</span></div>
                        <div class="term-line"><span class="term-output">- Refresh token: check Redis, rotate</span></div>
                        <div class="term-line"></div>
                        <div class="term-line"><span class="term-dim">Writing</span> <span class="term-green">src/auth/middleware.rs</span></div>
                        <div class="term-line"><span class="term-dim">Writing</span> <span class="term-green">src/auth/claims.rs</span></div>
                        <div class="term-line"></div>
                        <div class="term-line"><span class="term-dim">Running</span> cargo check</div>
                        <div class="term-line"><span class="term-green">&#10003;</span> <span class="term-output">Compiling auth v0.1.0</span></div>
                        <div class="term-line"></div>
                        <div class="term-line"><span class="term-info">Claude:</span> Middleware compiles. Sending design to lead for review. <span class="term-cursor"></span></div>
                    </div>
                </div>
            </div>

            <!-- Minimized kilds -->
            <div class="minimized-area">
                <div class="minimized-bar">
                    <span class="minimized-dot active"></span>
                    <span class="minimized-name">feature-api</span>
                    <span class="minimized-status">editing src/api/routes.rs</span>
                    <span class="minimized-time">2m ago</span>
                    <span class="minimized-expand">&#9652;</span>
                </div>
                <div class="minimized-bar">
                    <span class="minimized-dot active"></span>
                    <span class="minimized-name">perf-queries</span>
                    <span class="minimized-status">running EXPLAIN ANALYZE</span>
                    <span class="minimized-time">12m</span>
                    <span class="minimized-expand">&#9652;</span>
                </div>
            </div>
        </main>

        <!-- ================================
             STATUS BAR
             ================================ -->
        <footer class="status-bar">
            <div class="status-left">
                <span class="status-alert">
                    <span class="status-alert-dot"></span>
                    fix-login-bug needs rebase
                </span>
                <span style="color: var(--aurora);">&#10003;</span>
                <span>architect completed middleware design</span>
            </div>
            <div class="status-right">
                <span class="shortcut"><span class="kbd">&#8984;K</span> palette</span>
                <span class="shortcut"><span class="kbd">&#8984;\\</span> split</span>
                <span class="shortcut"><span class="kbd">&#8984;J</span>/<span class="kbd">K</span> nav</span>
            </div>
        </footer>
    </div>

    <script>
        const sidebar = document.querySelector('.sidebar');

        // Project switching
        document.querySelectorAll('.project-icon').forEach(icon => {
            icon.addEventListener('click', () => {
                document.querySelectorAll('.project-icon').forEach(i => i.classList.remove('selected'));
                icon.classList.add('selected');
            });
        });

        // Kild selection: first click = select, click again = inspect
        document.querySelectorAll('.kild-item').forEach(item => {
            item.addEventListener('click', () => {
                if (item.classList.contains('selected')) {
                    // Already selected — open detail view
                    sidebar.classList.add('detail-mode');
                } else {
                    // Select this kild
                    document.querySelectorAll('.kild-item').forEach(i => i.classList.remove('selected'));
                    item.classList.add('selected');
                }
            });
        });

        // Back button exits detail view
        document.getElementById('detailBack').addEventListener('click', () => {
            sidebar.classList.remove('detail-mode');
        });

        // Keyboard: Enter = inspect, Escape = back to list
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !sidebar.classList.contains('detail-mode')) {
                sidebar.classList.add('detail-mode');
                e.preventDefault();
            }
            if (e.key === 'Escape' && sidebar.classList.contains('detail-mode')) {
                sidebar.classList.remove('detail-mode');
                e.preventDefault();
            }
        });

        // Teammate tab switching
        document.querySelectorAll('.teammate-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.teammate-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
            });
        });
    </script>
</body>
</html>
